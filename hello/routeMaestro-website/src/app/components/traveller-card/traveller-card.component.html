<body>
  <div class="sub-container" (click)="dialogbox()"></div>
    <main>
        <div class="header">
            <h2 style="padding-left: 30px;">Add Traveeller Details</h2>
            <h2 style="padding-right: 15px; cursor: pointer;" (click)="dialogbox()">X</h2>
        </div>
        <div class="travellers">
            <div style="display: flex; justify-content: flex-start; align-items: center;  padding-left:20px;">
                <h2>Traveller {{editIndex? editIndex+1 :currentTravellerCount}} </h2>
                <span> /{{NoOfTravellers}}</span>
            </div>
           
        
            <ng-container *ngIf="RoomGuest && RoomGuest.length > 0">
              <div class="container">
                <!-- Loop through RoomGuest array -->
                <div class="boxes">
                  <ng-container *ngFor="let item of RoomGuest; let i = index">
                    <!-- Check if NoOfAdults is defined and greater than 0 -->
                    <ng-container *ngIf="item?.NoOfAdults && item?.NoOfAdults > 0">
                      <!-- Loop to generate cards for adults -->
                      <ng-container *ngFor="let star of getArray(item?.NoOfAdults); let j = index">
                        <div class="card" >
                          <span style="width: 100%; background-color: black; color: white; display: flex; justify-content: center;">Room -{{ i + 1 }}</span>
                          <div  style="display: flex; flex-direction: column; justify-content: center; align-items: center;">
                            <i class="fa-solid fa-user adult-icon"></i>
                            <p>Traveller</p>
                          </div>
                        </div>
                      </ng-container>
                      <ng-container *ngFor="let star of getArray( item?.NoOfChild); let j = index">
                        <div class="card" >
                          <span style="width: 100%; background-color: black; color: white; display: flex; justify-content: center;">Room -{{ i + 1 }}</span>
                          <div style="display: flex; flex-direction: column; justify-content: center; align-items: center;">
                            <i class="fa-solid fa-baby child-icon"></i>
                            <p>Traveller</p>
                          </div>
                        </div>
                      </ng-container>
                    </ng-container>
                  </ng-container>
                </div>
                
              </div>
            </ng-container>
            
              
                  
                <!-- <div class="boxes">
                    <div class="card" >
                        <span style="width: 100%; background-color: black; color:white; display: flex; justify-content: center;">Room -</span>
                        <div>
                            <i class="fa-solid fa-user adult-icon"></i>
                            <p>Adult</p>
                        </div>
                    </div>
                    <div class="card">
                        <span style="width: 100%; background-color: black; color:white; display: flex; justify-content: center;">Room -1</span>
                        <div>
                            <i class="fa-solid fa-user adult-icon"></i>
                            <p>Adult</p>
                        </div>
                    </div>
                    <div class="card">
                        <span style="width: 100%; background-color: black; color:white; display: flex; justify-content: center;">Room -1</span>
                        <div>
                            <i class="fa-solid fa-baby child-icon"></i>
                            <p>Child</p>
                        </div>
                    </div>
                    <div class="card">
                        <span style="width: 100%; background-color: black; color:white; display: flex; justify-content: center;">Room -1</span>
                        <div>
                            <i class="fa-solid fa-user adult-icon"></i>
                            <p>Adult</p>
                        </div>
                    </div>
                   </div> -->
            
                   <form [formGroup]="travelerForm" >
                    <div class="info">
                      <div class="head">
                        <h2>Mandatory Information</h2>
                      </div>
                      <hr>
                     
                        
                          <div class="traveller-info">
                            <div style="padding-top: 20px; padding-bottom: 20px; width: 100%; display: flex; justify-content: flex-start; gap: 20px;">
                              <span>Enter Mandatory Details</span> 
                              <ng-container *ngIf="travelData?.passenger_details[editIndex] "> <i class="fa-solid fa-pen-to-square"></i></ng-container>
                            </div>
                            <fieldset class="inputs" formGroupName="personalInfo">
                              <legend>Personal Info</legend>
                              <div>
                                <label><span>First Name</span></label>
                                <input type="text" formControlName="firstName" required [value]="travelData?.passenger_details[editIndex]?.personalInfo.firstName" />
                              </div>
                              <div>
                                <label><span>Last Name</span></label>
                                <input type="text" formControlName="lastName" required [value]="travelData?.passenger_details[editIndex]?.personalInfo.lastName" />
                              </div>
                              <div>
                                <label><span>Date of Birth</span></label>
                                <input type="date" formControlName="dateOfBirth" required [value]="travelData?.passenger_details[editIndex]?.personalInfo.dateOfBirth" />
                              </div> 
                              <div>
                                <label><span>Gender</span></label>
                                <select formControlName="gender" required [value]="travelData?.passenger_details[editIndex]?.personalInfo.gender" >
                                  <option></option>
                                  <option>Male</option>
                                  <option>Female</option>
                                </select>
                              </div>
                              <div>
                                <label><span>Nationality</span></label>
                                <select formControlName="nationality" required [value]="travelData?.passenger_details[editIndex]?.personalInfo.nationality" >
                                  <option></option>
                                  <option>India</option>
                                  <option>United States</option>
                                </select>
                              </div>
                              <div>
                                <label><span>PAN</span></label>
                                <input type="text" formControlName="pan" required [value]="travelData?.passenger_details[editIndex]?.personalInfo.pan" />
                              </div>
                              <div>
                                <label><span>Passport No.</span></label>
                                <input type="text" formControlName="passportNo" required [value]="travelData?.passenger_details[editIndex]?.personalInfo.passportNo"/>
                              </div>
                              <div>
                                <label><span>Passport Issue Date</span></label>
                                <input type="date" formControlName="passportIssueDate" required [value]="travelData?.passenger_details[editIndex]?.personalInfo.passportIssueDate"  />
                              </div>
                              <div>
                                <label><span>Passport Expiry Date</span></label>
                                <input type="date" formControlName="passportExpiryDate" required [value]="travelData?.passenger_details[editIndex]?.personalInfo.passportExpiryDate"  />
                              </div>
                            </fieldset>
    
                            <fieldset class="inputs" formGroupName="ssr">
                                <legend>SSR</legend>
                                <div>
                                    <label><span>Extra Baggage (kgs)</span></label>
                                    <select formControlName="extraBaggage1" [value]="travelData?.passenger_details[editIndex]?.ssr.extraBaggage1" >
                                        <option>Weight 0 (Rs. 0)</option>
                                        <option>Weight 5 (Rs. 2210)</option>
                                        <option>Weight 10 (Rs. 4950)</option>
                                        <option>Weight 15 (Rs. 7425)</option>
                                        <option>Weight 30 (Rs. 7425)</option>
                                    </select>
                                </div>
                                <div>
                                    <label><span>Meal</span></label>
                                    <select formControlName="extraBaggage2" [value]="travelData?.passenger_details[editIndex]?.ssr.meal">
                                        <option>Weight 0 (Rs. 0)</option>
                                        <option>Weight 5 (Rs. 2210)</option>
                                        <option>Weight 10 (Rs. 4950)</option>
                                        <option>Weight 15 (Rs. 7425)</option>
                                        <option>Weight 30 (Rs. 7425)</option>
                                    </select>
                                </div>
                                <div>
                                    <label><span>Meal</span></label>
                                    <select formControlName="seat" [value]="travelData?.passenger_details[editIndex]?.ssr.seat">
                                        <option>Weight 0 (Rs. 0)</option>
                                        <option>Weight 5 (Rs. 2210)</option>
                                        <option>Weight 10 (Rs. 4950)</option>
                                        <option>Weight 15 (Rs. 7425)</option>
                                        <option>Weight 30 (Rs. 7425)</option>
                                    </select>
                                </div>
                               
                            
                                
                            </fieldset>
                            <ng-container *ngIf=" !travelData?.passenger_details[editIndex]">
                              <div class="btn" *ngIf="travelerForm.valid">
                                <button type="submit" (click)="addTraveler()"><span>Add Traveler</span></button>
                              </div>
                            </ng-container>
                           
                            <ng-container *ngIf="travelData?.passenger_details[editIndex]">
                              <div class="btn" >
                               
                                <button type="submit" (click)="updateTraveller()"><span>Update</span></button>
                              </div>
                            </ng-container>
                            
                          </div>
                       
                    </div>
                  </form>
                  
        </div>
    </main>
</body>